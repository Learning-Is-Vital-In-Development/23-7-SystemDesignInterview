## 2장: 개략적인 규모 추정

시스템 용량이나 성능 요구사항에 대한 규모를 추정할 수 있어야한다.

- 2의 제곱수
- 응답지연(latency)
- 가용성

### 2의 제곱수

데이터볼륨의 단위를 2의 제곱수로 표현
최소단위 : 1byte(ASCII 문자 하나의 메모리 크기), 8bit

> [ASCII and UTF](https://gaeng-stroy.tistory.com/163)

### 응답 지연(latency)

메모리는 빠르지만 디스크는 아직 느리므로 디스크 탐색은 최소화하는 것이 좋다
단순 압축 등은 처리가 빠르므로 데이터를 인터넷으로 전송하기전에 가능하면 압축
데이터센터 리전 간 통신은 생각보다 시간이 걸린다

### 가용성

`고가용성(HA)` : 시스템이 지속적이고 안정적으로 운영될 수 있는 능력

가용시간(uptime) 을 늘리고 장애시간(downtime) 을 줄여야 가용률이 올라간다.

- 이런 가용치 측정은 약 nn 정도로 근사치로 추정하고, 상세한 계산에 시간쓸 필요 없다
- 가정(assumption) 들은 적어두고 나중에 살펴봐라
- 단위를 잘 명시해야 나중에 헷갈리지 않음
- 주요 출제 : `QPS`, `Peek QPS`, `저장소 요구량`, `캐시 요구량`,`서버 수`

#### 트위터 QPS, 저장소 요구량 추정

가정

- MAU 3억명
- 50% 의 사용자는 매일 트위터를 사용
- 각 사용자의 평균 트윗은 일 2건
- 미디어를 포함하는 트윗은 10%
- 데이터는 5년간 보관

`QPS(Query Per Second)` 추정

- DAU = 3억 \* 50% = 1.5억
- 1.5억 \* 2트윗 /24시간/3600초 = 약 3500 query/s
- 최대 QPS(Peek QPS) = 2QPS = 약 7000

미디어 저장소 요구량

- 평균 트윗크기 = id(64 byte) + text(140byte) + media(1MB)
- 1.5억 _ 2트윗 _ 10% \* 1ㅡㅠ = 30TB/일
- 5년간 보관이므로 30TB _ 365 _ 5 = 55PB

추정하는게 신기하긴 했는데 일반적으로는 사내 기본 사이즈로 생성하고 필요하면 늘리지 않을까..
