# 개략적인 규모 추정

시스템을 설계할 때는, 해당 시스템이 어느 정도의 규모를 가져야 하는지 개략적으로 측정할 수 있어야 한다.

개략적인 규모 추정을 효과적으로 해 내려면 규모 확장성을 표현하는 아래 내용을 잘 이해하고 있어야 한다.

- 2의 제곱수
- 응답지연 값
- 고 가용성에 관련된 수치

## 2의 제곱수

분산 시스템에서 다루는 데이터 양은 엄청나게 커질 수 있으나 계산법은 크게 벗어나지 않음

| 2의 x 제곱 | 근사치 | 이름 | 축약형 |
| --- | --- | --- | --- |
| 10 | 1천(thousand) | 1킬로바이트 | 1KB |
| 20 | 1백만(million) | 1메가바이트 | 1MB |
| 30 | 10억(billion) | 1기가바이트 | 1GB |
| 40 | 1조(trillion) | 1테라바이트 | 1TB |
| 50 | 1000조(quadrillion) | 1페타바이트 | 1PB |

흔히 쓰이는 데이터 볼륨 단위이다.

## 응답지연 값

아래 내용은 컴퓨터 연산들의 처리 속도가 어느정도인지 짐작할 수 있다.

| 연산명 | 시간 |
| --- | --- |
| L1 캐시 참조 | 0.5ns |
| 분기 예측 오류(branch mispredict) | 5ns |
| L2 캐시 참조 | 7ns |
| 뮤텍스(mutex) 락/언락 | 100ns |
| 주 메모리 참조 | 100ns |
| Zippy로 1 KB 압축 | 10,000ns = 10us |
| 1 Gbps 네트워크로 2 KB 전송 | 20,000ns = 10us |
| 메모리에서 1 MB 순차적으로 read | 250,000ns = 250us |
| 같은 데이터 센터 내에서 메시지 왕복 지연시간 | 500,000ns = 500us |
| 디스크 탐색(seek) | 10,000,000ns = 10ms |
| 네트워크에서 1 MB 순차적으로 read | 10,000,000ns = 10ms |
| 디스크에서 1 MB 순차적으로 read | 30,000,000ns = 30ms |
| 한 패킷의 CA(캘리포니아)로부터 네덜란드까지의 왕복 지연 시간 | 150,000,000ns = 150ms |

![image (1)](https://user-images.githubusercontent.com/55054505/232320135-6b07f586-55fb-4d67-893f-dd084d257e40.png)
위 수치를 분석하면 다음과 같은 결론이 나온다.

- 메모리는 빠르지만 디스크는 아직 느리다.
- 디스크 탐색(seek)은 가능한 피하라
- 단순한 압축 알고리즘은 빠르다.
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라
- 데이터 센터는 보통 여러 지역(region)에 분산되어 있고, 센터들 간 데이터를 주고받는 데는 시간이 걸린다.

## **가용성에 관계된 수치들**

**고가용성(high availability)**

- 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력, 보통 퍼센트로 표현한다.

**SLA(Service Level Agreement)**

- 서비스 사업자(service provider)가 보편적으로 사용하는 용어로, 서비스 사업자와 고객 사이에 맺어진 합의를 의미
- 가용률에 9가 많을 수록 장애 시간(downtime)이 낮다.

| 가용률 | 하루당 장애시간 | 주당 장애시간 | 개월당 장애시간 | 연간 장애시간 |
| --- | --- | --- | --- | --- |
| 99% | 14.40분 | 1.68시간 | 7.31시간 | 3.65인 |
| 99.9% | 1.44분 | 10.08분 | 43.83분 | 8.77시간 |
| 99.99% | 8.64초 | 1.01분 | 4.38분 | 52.60분 |
| 99.999% | 864.00밀리초 | 6.05초 | 26.30초 | 5.26분 |
| 99.9999% | 86.40밀리초 | 604.80밀리초 | 2.63초 | 31.56초 |